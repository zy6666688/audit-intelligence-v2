{
  "workflow_id": "audit_demo_mock_v1",
  "name": "审计示例工作流（清洗-校验-可视化）",
  "description": "文件上传→加载→列映射→空值清洗→范围校验→规则检查→预览与图表",
  "created_at": "2025-12-12T19:59:00.000000",
  "nodes": [
    {
      "id": "n1",
      "type": "FileUploadNode",
      "name": "上传文件",
      "params": {
        "file_path": "input/invoice_demo.xlsx",
        "workflow_id": "audit_demo_mock_v1"
      },
      "position": { "x": 100, "y": 200 }
    },
    {
      "id": "n2",
      "type": "ExcelLoader",
      "name": "加载Excel",
      "params": {
        "file_path": "input/invoice_demo.xlsx",
        "sheet_name": "Sheet1",
        "nrows": 5000
      },
      "position": { "x": 300, "y": 200 }
    },
    {
      "id": "n3",
      "type": "ColumnMapperNode",
      "name": "标准化列名",
      "params": {
        "mapping_json": "{\"发票号码\":\"invoice_no\",\"金额\":\"amount\",\"日期\":\"date\"}",
        "keep_other_columns": false,
        "strict_mode": true,
        "drop_duplicates": true
      },
      "position": { "x": 500, "y": 200 }
    },
    {
      "id": "n4",
      "type": "NullValueCleanerNode",
      "name": "空值清洗",
      "params": {
        "target_columns": "amount,date",
        "strategy": "drop_rows",
        "report_limit": 20
      },
      "position": { "x": 700, "y": 200 }
    },
    {
      "id": "n5",
      "type": "ExcelColumnValidator",
      "name": "金额范围校验",
      "params": {
        "column_name": "amount",
        "min_value": 0,
        "max_value": 20000,
        "include_bounds": true,
        "report_limit": 20
      },
      "position": { "x": 900, "y": 200 }
    },
    {
      "id": "n6",
      "type": "AuditCheckNode",
      "name": "规则判定",
      "params": {
        "amount": 10000.0,
        "threshold": 10000.0
      },
      "position": { "x": 1100, "y": 200 }
    },
    {
      "id": "n7",
      "type": "DataFrameToTableNode",
      "name": "异常预览",
      "params": {
        "max_rows": 20,
        "include_index": false,
        "truncate_cols": 120
      },
      "position": { "x": 900, "y": 380 }
    },
    {
      "id": "n8",
      "type": "QuickPlotNode",
      "name": "异常分布图",
      "params": {
        "chart_type": "bar",
        "x_column": "invoice_no",
        "y_column": "amount",
        "title": "异常金额分布",
        "legend_show": true,
        "max_points": 500,
        "sort_by_x": false
      },
      "position": { "x": 1100, "y": 380 }
    }
  ],
  "edges": [
    { "from": "n1", "to": "n2", "from_slot": 0, "to_slot": 0 },
    { "from": "n2", "to": "n3", "from_slot": 0, "to_slot": 0 },
    { "from": "n3", "to": "n4", "from_slot": 0, "to_slot": 0 },
    { "from": "n4", "to": "n5", "from_slot": 0, "to_slot": 0 },
    { "from": "n5", "to": "n7", "from_slot": 0, "to_slot": 0 },
    { "from": "n5", "to": "n8", "from_slot": 0, "to_slot": 0 }
  ]
}

