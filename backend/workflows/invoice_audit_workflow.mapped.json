{
  "workflow_id": "invoice_audit_demo_v1.mapped",
  "name": "发票审计示例工作流（mapped 副本，自动建议应用）",
  "description": "副本：基于自动映射建议生成，供人工 review，原始 preset 未被覆盖。",
  "source_workflow": "invoice_audit_workflow.json",
  "created_at": "2025-12-23T14:35:40.781517",
  "nodes": [
    {
      "id": "n1",
      "type": "ExcelLoader",
      "name": "加载发票数据",
      "params": {
        "file_path": "input/sample_invoices.xlsx"
      },
      "position": {
        "x": 100,
        "y": 200
      }
    },
    {
      "id": "n2",
      "type": "ColumnMapperNode",
      "name": "标准化列名",
      "params": {
        "mapping_json": "{\"invoice_number\": \"\\u53d1\\u7968\\u53f7\", \"vendor\": \"\\u4f9b\\u5e94\\u5546\", \"amount\": \"\\u91d1\\u989d\", \"date\": \"\\u65e5\\u671f\", \"category\": \"\\u7c7b\\u522b\"}",
        "keep_other_columns": true,
        "strict_mode": false
      },
      "position": {
        "x": 300,
        "y": 200
      }
    },
    {
      "id": "n3",
      "type": "NullValueCleanerNode",
      "name": "清理空值",
      "params": {
        "target_columns": "*",
        "strategy": "drop_rows"
      },
      "position": {
        "x": 500,
        "y": 200
      }
    },
    {
      "id": "n4",
      "type": "CommonMetricsNode",
      "name": "计算基础指标",
      "params": {},
      "position": {
        "x": 700,
        "y": 100
      }
    },
    {
      "id": "n5",
      "type": "SceneMetricsNode",
      "name": "计算发票场景指标",
      "params": {
        "business_scene": "invoice_audit"
      },
      "position": {
        "x": 900,
        "y": 100
      }
    },
    {
      "id": "n6",
      "type": "RuleCalculationNode",
      "name": "执行审计规则",
      "params": {},
      "position": {
        "x": 1100,
        "y": 200
      }
    },
    {
      "id": "n7",
      "type": "ExcelColumnValidator",
      "name": "金额范围验证",
      "params": {
        "column_name": "金额",
        "min_value": 0,
        "max_value": 100000
      },
      "position": {
        "x": 700,
        "y": 300
      }
    },
    {
      "id": "n8",
      "type": "TextUnderstandingAI",
      "name": "分析描述文本",
      "params": {
        "task_type": "extract"
      },
      "position": {
        "x": 1300,
        "y": 100
      }
    },
    {
      "id": "n9",
      "type": "AnalysisReasoningAI",
      "name": "综合风险分析",
      "params": {},
      "position": {
        "x": 1500,
        "y": 200
      }
    },
    {
      "id": "n10",
      "type": "HumanReviewNode",
      "name": "人工复核",
      "params": {
        "reviewer_comment": "经审核确认"
      },
      "position": {
        "x": 1700,
        "y": 200
      }
    },
    {
      "id": "n11",
      "type": "QuickPlotNode",
      "name": "生成供应商分析图",
      "params": {
        "chart_type": "pie",
        "x_column": "供应商",
        "y_column": "金额",
        "title": "供应商金额分布"
      },
      "position": {
        "x": 900,
        "y": 400
      }
    },
    {
      "id": "n12",
      "type": "DataFrameToTableNode",
      "name": "异常数据预览",
      "params": {
        "max_rows": 20,
        "include_index": false
      },
      "position": {
        "x": 1100,
        "y": 400
      }
    },
    {
      "id": "n13",
      "type": "ResultGenerationNode",
      "name": "生成审计结果",
      "params": {},
      "position": {
        "x": 1900,
        "y": 200
      }
    },
    {
      "id": "n14",
      "type": "ExportReportNode",
      "name": "导出审计报告",
      "params": {
        "export_format": "excel"
      },
      "position": {
        "x": 2100,
        "y": 200
      }
    }
  ],
  "edges": [
    {
      "from": "n1",
      "to": "n2",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n2",
      "to": "n3",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n3",
      "to": "n4",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n3",
      "to": "n5",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n3",
      "to": "n7",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n4",
      "to": "n6",
      "from_slot": 0,
      "to_slot": 1
    },
    {
      "from": "n5",
      "to": "n6",
      "from_slot": 0,
      "to_slot": 2
    },
    {
      "from": "n3",
      "to": "n6",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n3",
      "to": "n8",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n6",
      "to": "n9",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n4",
      "to": "n9",
      "from_slot": 0,
      "to_slot": 1
    },
    {
      "from": "n8",
      "to": "n9",
      "from_slot": 0,
      "to_slot": 2
    },
    {
      "from": "n6",
      "to": "n10",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n9",
      "to": "n10",
      "from_slot": 0,
      "to_slot": 1
    },
    {
      "from": "n3",
      "to": "n11",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n7",
      "to": "n12",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n10",
      "to": "n13",
      "from_slot": 0,
      "to_slot": 0
    },
    {
      "from": "n9",
      "to": "n13",
      "from_slot": 0,
      "to_slot": 1
    },
    {
      "from": "n13",
      "to": "n14",
      "from_slot": 0,
      "to_slot": 0
    }
  ]
}

