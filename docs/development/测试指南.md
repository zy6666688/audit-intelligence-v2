# 🧪 审计底稿引擎 - 功能测试指南

**版本**: v0.8.0  
**测试日期**: 2025-12-01  
**状态**: 准备测试

---

## 🚀 快速开始测试

### 环境准备

**1. 启动后端服务**
```bash
cd packages/backend
npm install
npx prisma generate
npx prisma migrate dev
npm run dev
```

**预期输出**:
```
✅ Server running at http://localhost:3000
✅ Database connected
✅ 47 API endpoints registered
```

---

**2. 启动前端服务**
```bash
# 在项目根目录
npm install
npm run dev:h5
```

**预期输出**:
```
✅ Local:   http://localhost:5173/
✅ Network: http://192.168.x.x:5173/
```

---

**3. 访问系统**

打开浏览器访问: `http://localhost:5173`

---

## ✅ 功能测试清单

### 测试1: 用户登录 (2分钟)

**测试步骤**:
```
1. 打开登录页面
2. 输入测试账号
   - 用户名: admin
   - 密码: admin123
3. 点击"登录"
4. 验证跳转到首页
```

**预期结果**:
```
✅ 登录成功提示
✅ Token保存到本地
✅ 跳转到首页/项目列表
✅ 显示用户信息
```

**测试截图检查点**:
- [ ] 登录表单显示正常
- [ ] 登录按钮可点击
- [ ] 登录成功有提示
- [ ] 页面跳转成功

---

### 测试2: 项目管理 (5分钟)

#### 2.1 创建项目

**测试步骤**:
```
1. 点击"创建项目"按钮
2. 填写项目信息
   - 项目名称: "2024年度审计测试"
   - 项目描述: "这是一个测试项目"
   - 状态: 进行中
3. 点击"保存"
4. 验证项目创建成功
```

**预期结果**:
```
✅ 保存成功提示
✅ 返回项目列表
✅ 新项目显示在列表中
✅ 项目信息正确
```

---

#### 2.2 编辑项目

**测试步骤**:
```
1. 点击项目卡片进入详情
2. 点击"编辑"按钮
3. 修改项目名称
4. 点击"保存"
5. 验证修改成功
```

**预期结果**:
```
✅ 修改成功提示
✅ 项目信息已更新
✅ 列表显示新名称
```

---

#### 2.3 搜索项目

**测试步骤**:
```
1. 在搜索框输入项目名称
2. 点击"搜索"
3. 验证搜索结果
```

**预期结果**:
```
✅ 搜索结果正确
✅ 匹配项目高亮
✅ 无匹配时显示空状态
```

---

### 测试3: 工作流编辑器 (10分钟) ⭐

这是系统的核心功能，需要重点测试！

#### 3.1 创建工作流

**测试步骤**:
```
1. 进入项目详情页
2. 点击"工作流"标签
3. 点击"创建工作流"
4. 验证进入编辑器
```

**预期结果**:
```
✅ 编辑器页面加载
✅ 画布显示网格
✅ 左侧节点面板显示
✅ 默认节点已添加
```

**检查点**:
- [ ] 画布区域可见
- [ ] 网格背景显示
- [ ] 节点面板可见
- [ ] 工具栏显示正常

---

#### 3.2 添加节点

**测试步骤**:
```
1. 从左侧节点面板选择"数据输入"
2. 点击添加
3. 节点出现在画布上
4. 重复添加其他节点
   - 数据筛选
   - 数据聚合
   - 报告生成
```

**预期结果**:
```
✅ 节点成功添加
✅ 节点显示在画布
✅ 节点图标正确
✅ 节点名称显示
```

**检查点**:
- [ ] 数据输入节点 📥
- [ ] 数据筛选节点 🔍
- [ ] 数据聚合节点 📊
- [ ] 报告生成节点 📄

---

#### 3.3 拖拽节点

**测试步骤**:
```
1. 点击选中一个节点
2. 拖动节点到新位置
3. 释放鼠标/手指
4. 验证节点位置更新
```

**预期结果**:
```
✅ 节点可以拖动
✅ 拖动时有视觉反馈
✅ 释放后位置固定
✅ 画布可以滚动
```

**检查点**:
- [ ] 拖拽流畅
- [ ] 位置准确
- [ ] 不超出画布
- [ ] 网格对齐

---

#### 3.4 配置节点

**测试步骤**:
```
1. 点击选中节点
2. 右侧属性面板打开
3. 修改节点名称: "主数据输入"
4. 修改描述: "导入审计数据"
5. 验证修改保存
```

**预期结果**:
```
✅ 属性面板显示
✅ 可以编辑名称
✅ 可以编辑描述
✅ 修改自动保存
```

**检查点**:
- [ ] 属性面板显示
- [ ] 字段可编辑
- [ ] 实时更新
- [ ] 节点显示新名称

---

#### 3.5 删除节点

**测试步骤**:
```
1. 选中一个节点
2. 点击右上角"✕"按钮
3. 确认删除
4. 验证节点移除
```

**预期结果**:
```
✅ 显示确认对话框
✅ 确认后删除节点
✅ 画布更新
✅ 相关连线删除
```

---

#### 3.6 保存工作流

**测试步骤**:
```
1. 编辑工作流名称: "数据分析流程"
2. 点击"💾 保存"按钮
3. 等待保存完成
4. 验证保存成功
```

**预期结果**:
```
✅ 保存成功提示
✅ 状态栏显示保存时间
✅ 返回列表可见工作流
```

---

### 测试4: 文件上传 (5分钟)

#### 4.1 上传单个文件

**测试步骤**:
```
1. 进入项目详情页
2. 找到文件上传组件
3. 点击上传区域
4. 选择一个文件 (如: test.pdf)
5. 等待上传完成
```

**预期结果**:
```
✅ 文件选择对话框打开
✅ 上传进度条显示
✅ 上传成功提示
✅ 文件出现在列表
```

**检查点**:
- [ ] 选择文件成功
- [ ] 进度条显示
- [ ] 上传成功提示
- [ ] 文件列表更新

---

#### 4.2 文件列表操作

**测试步骤**:
```
1. 查看已上传文件列表
2. 点击"下载"按钮
3. 点击"删除"按钮
4. 确认删除
```

**预期结果**:
```
✅ 文件图标正确
✅ 文件名显示
✅ 文件大小显示
✅ 下载功能正常
✅ 删除确认对话框
✅ 删除成功
```

---

#### 4.3 多文件上传

**测试步骤**:
```
1. 选择多个文件
2. 等待全部上传完成
3. 验证所有文件都在列表
```

**预期结果**:
```
✅ 可以选择多个文件
✅ 依次上传
✅ 全部上传成功
✅ 列表显示所有文件
```

---

### 测试5: 执行监控 (8分钟) ⭐

这是新增的核心功能！

#### 5.1 查看执行监控

**测试步骤**:
```
1. 在工作流详情页
2. 点击"▶ 执行"按钮
3. 等待跳转到监控页面
4. 验证监控页面加载
```

**预期结果**:
```
✅ 执行成功提示
✅ 跳转到监控页面
✅ 显示任务信息
✅ 显示执行状态
```

**检查点**:
- [ ] 任务卡片显示
- [ ] 状态正确 (running)
- [ ] 进度条显示
- [ ] 时间信息正确

---

#### 5.2 查看执行日志

**测试步骤**:
```
1. 在监控页面向下滚动
2. 查看执行日志区域
3. 点击日志过滤按钮
   - 全部
   - 信息
   - 警告
   - 错误
4. 验证过滤功能
```

**预期结果**:
```
✅ 日志列表显示
✅ 日志时间正确
✅ 日志级别标识
✅ 过滤功能正常
```

**检查点**:
- [ ] 日志列表可见
- [ ] ℹ️ 信息日志
- [ ] ⚠️ 警告日志
- [ ] ❌ 错误日志
- [ ] 过滤按钮可用

---

#### 5.3 实时刷新

**测试步骤**:
```
1. 等待3秒
2. 观察页面自动刷新
3. 验证进度更新
4. 验证日志更新
```

**预期结果**:
```
✅ 3秒自动刷新
✅ 进度条更新
✅ 新日志出现
✅ 状态可能变化
```

---

#### 5.4 手动刷新

**测试步骤**:
```
1. 点击"↻ 刷新"按钮
2. 等待刷新完成
3. 验证数据更新
```

**预期结果**:
```
✅ 刷新按钮可点击
✅ 刷新图标旋转
✅ 数据已更新
✅ 刷新成功提示
```

---

#### 5.5 查看执行结果

**测试步骤**:
```
1. 等待执行完成
2. 向下滚动到结果区域
3. 查看执行结果
4. 验证结果数据
```

**预期结果**:
```
✅ 结果区域显示
✅ 成功/失败状态
✅ 输出数据显示
✅ 统计信息显示
```

---

#### 5.6 下载结果

**测试步骤**:
```
1. 点击"📥 下载结果"按钮
2. 等待下载完成
3. 验证文件下载
```

**预期结果**:
```
✅ 下载开始
✅ 下载进度显示
✅ 下载成功提示
✅ 文件保存成功
```

---

### 测试6: 组件测试 (3分钟)

#### 6.1 执行卡片组件

**测试步骤**:
```
1. 查看项目详情中的执行历史
2. 验证卡片显示
3. 点击卡片查看详情
```

**预期结果**:
```
✅ 卡片列表显示
✅ 状态徽章正确
✅ 进度条显示
✅ 点击可跳转
```

---

#### 6.2 空状态组件

**测试步骤**:
```
1. 进入一个没有数据的页面
2. 验证空状态显示
3. 点击操作按钮
```

**预期结果**:
```
✅ 空状态图标显示
✅ 提示文案显示
✅ 操作按钮可用
✅ 点击跳转正确
```

---

## 📊 测试结果记录表

### 功能测试结果

| 测试项 | 状态 | 备注 |
|--------|------|------|
| 用户登录 | ⬜ | |
| 项目创建 | ⬜ | |
| 项目编辑 | ⬜ | |
| 项目搜索 | ⬜ | |
| 创建工作流 | ⬜ | |
| 添加节点 | ⬜ | |
| 拖拽节点 | ⬜ | |
| 配置节点 | ⬜ | |
| 删除节点 | ⬜ | |
| 保存工作流 | ⬜ | |
| 上传文件 | ⬜ | |
| 文件操作 | ⬜ | |
| 查看执行 | ⬜ | |
| 执行日志 | ⬜ | |
| 实时刷新 | ⬜ | |
| 执行结果 | ⬜ | |

**符号说明**:
- ✅ 通过
- ⚠️ 部分通过
- ❌ 失败
- ⬜ 未测试

---

## 🐛 Bug记录模板

### Bug #1

**标题**: [简短描述]

**优先级**: 高/中/低

**重现步骤**:
```
1. 
2. 
3. 
```

**预期结果**:
```

```

**实际结果**:
```

```

**截图**: 

**环境信息**:
- 浏览器: 
- 系统: 
- 版本: 

---

## 🎯 性能测试

### 页面加载时间

| 页面 | 首屏时间 | 完全加载 | 标准 | 状态 |
|------|----------|----------|------|------|
| 登录页 | ___ ms | ___ ms | < 1s | ⬜ |
| 项目列表 | ___ ms | ___ ms | < 2s | ⬜ |
| 工作流编辑器 | ___ ms | ___ ms | < 3s | ⬜ |
| 执行监控 | ___ ms | ___ ms | < 2s | ⬜ |

---

### 交互响应时间

| 操作 | 响应时间 | 标准 | 状态 |
|------|----------|------|------|
| 点击按钮 | ___ ms | < 100ms | ⬜ |
| 拖拽节点 | ___ ms | < 50ms | ⬜ |
| 搜索过滤 | ___ ms | < 200ms | ⬜ |
| API请求 | ___ ms | < 1s | ⬜ |

---

## ✅ 测试通过标准

### 功能完整性

```
✅ 所有核心功能可用
✅ 无阻塞性bug
✅ 界面显示正常
✅ 数据保存正确
```

### 用户体验

```
✅ 交互流畅
✅ 反馈及时
✅ 界面美观
✅ 操作直观
```

### 性能指标

```
✅ 页面加载 < 3s
✅ 交互响应 < 100ms
✅ API请求 < 1s
✅ 无明显卡顿
```

---

## 📝 测试报告模板

### 测试摘要

**测试日期**: 2025-12-01  
**测试人员**: [姓名]  
**测试版本**: v0.8.0  
**测试环境**: [浏览器 + 系统]

### 测试结果

**总测试项**: 16项  
**通过**: __ 项 ✅  
**失败**: __ 项 ❌  
**跳过**: __ 项 ⬜  
**通过率**: __%

### 发现问题

**严重**: __ 个 🔴  
**一般**: __ 个 🟡  
**轻微**: __ 个 🟢

### 测试结论

```
□ 通过，可以发布
□ 部分通过，需要修复后发布
□ 不通过，需要重大修复
```

### 建议

```


```

---

## 🎊 测试完成检查清单

- [ ] 所有功能测试完成
- [ ] 所有bug已记录
- [ ] 性能测试完成
- [ ] 测试报告已填写
- [ ] 截图已保存
- [ ] 测试数据已备份
- [ ] 测试结果已同步团队

---

**测试指南版本**: v1.0  
**最后更新**: 2025-12-01  
**状态**: 准备测试

🧪 **开始您的测试之旅吧！**
