# ğŸŒ… æ—©æ™¨å¿«é€Ÿæ£€æŸ¥æ¸…å•

**æ—¥æœŸ**: 2025-12-02
**æ—¶é—´**: 07:30

## âš¡ 5åˆ†é’Ÿå¿«é€Ÿæ£€æŸ¥

### 1. è¿è¡Œå¥åº·æ£€æŸ¥ (1åˆ†é’Ÿ)
```powershell
.\health-check.ps1
```

**é¢„æœŸç»“æœ**:
- âœ… æ‰€æœ‰å®¹å™¨çŠ¶æ€ä¸º `Up` å’Œ `healthy`
- âœ… åç«¯APIè¿”å›12ä¸ªèŠ‚ç‚¹
- âœ… å‰ç«¯è¿”å›HTTP 200
- âœ… PostgreSQLå’ŒRedisè¿æ¥æ­£å¸¸

---

### 2. æ£€æŸ¥é”™è¯¯æ—¥å¿— (1åˆ†é’Ÿ)
```powershell
# æŸ¥çœ‹åç«¯é”™è¯¯
docker-compose -p audit-engine logs backend --tail=50 | Select-String "error|ERROR"

# æŸ¥çœ‹å‰ç«¯é”™è¯¯
docker-compose -p audit-engine logs frontend --tail=50 | Select-String "error|ERROR"
```

**å¦‚æœæœ‰é”™è¯¯**: è®°å½•é”™è¯¯ä¿¡æ¯å¹¶ç»§ç»­ä¸‹ä¸€æ­¥

---

### 3. æµ‹è¯•å…³é”®åŠŸèƒ½ (2åˆ†é’Ÿ)

```powershell
# æµ‹è¯•API
Invoke-WebRequest -Uri http://localhost:3002/api/nodes -UseBasicParsing

# æµ‹è¯•å‰ç«¯
Start-Process "http://localhost:8080"
```

**æ‰‹åŠ¨æµ‹è¯•**:
- [ ] å‰ç«¯é¡µé¢å¯ä»¥æ‰“å¼€
- [ ] å¯ä»¥æŸ¥çœ‹èŠ‚ç‚¹åˆ—è¡¨
- [ ] å¯ä»¥åˆ›å»ºç®€å•å·¥ä½œæµ

---

### 4. æ£€æŸ¥èµ„æºä½¿ç”¨ (1åˆ†é’Ÿ)
```powershell
docker stats --no-stream audit-engine-backend audit-engine-frontend audit-engine-db audit-engine-redis
```

**å…³æ³¨æŒ‡æ ‡**:
- CPUä½¿ç”¨ç‡ < 80%
- å†…å­˜ä½¿ç”¨ < 80%

---

## ğŸ”§ å¦‚éœ€è¦ä¼˜åŒ– (10åˆ†é’Ÿ)

### é€‰é¡¹A: ä»…å®‰å…¨ä¼˜åŒ–
```powershell
.\optimize.ps1 -SecurityOnly
```
**ä½œç”¨**: æ›´æ”¹æ‰€æœ‰é»˜è®¤å¯†ç 

### é€‰é¡¹B: ä»…æ€§èƒ½ä¼˜åŒ–
```powershell
.\optimize.ps1 -PerformanceOnly
```
**ä½œç”¨**: æ¸…ç†ç¼“å­˜ï¼Œä¼˜åŒ–Dockeré…ç½®

### é€‰é¡¹C: å®Œæ•´ä¼˜åŒ–
```powershell
.\optimize.ps1 -All
```
**ä½œç”¨**: å®‰å…¨+æ€§èƒ½+å¤‡ä»½é…ç½®

---

## ğŸ“‹ ä»Šæ—¥é‡ç‚¹ä»»åŠ¡

### é«˜ä¼˜å…ˆçº§ âš¡
1. **æ›´æ”¹é»˜è®¤å¯†ç ** (å¿…é¡»)
   ```powershell
   .\optimize.ps1 -SecurityOnly
   ```

2. **é…ç½®æ•°æ®åº“å¤‡ä»½** (å¿…é¡»)
   ```powershell
   # æ‰‹åŠ¨æ‰§è¡Œä¸€æ¬¡å¤‡ä»½æµ‹è¯•
   .\backup.ps1
   ```

3. **æµ‹è¯•å®Œæ•´å·¥ä½œæµ**
   - åˆ›å»ºé¡¹ç›®
   - åˆ›å»ºå·¥ä½œæµ
   - æ‰§è¡Œå·¥ä½œæµ
   - æŸ¥çœ‹ç»“æœ

### ä¸­ä¼˜å…ˆçº§ ğŸ“Š
4. **æ€§èƒ½æµ‹è¯•**
   ```powershell
   # éœ€è¦å®‰è£…Apache Bench (ab) æˆ–ä½¿ç”¨åœ¨çº¿å·¥å…·
   # æµ‹è¯•APIå“åº”æ—¶é—´
   ```

5. **å®Œå–„æ–‡æ¡£**
   - æ›´æ–°APIæ–‡æ¡£
   - æ·»åŠ ä½¿ç”¨ç¤ºä¾‹

### ä½ä¼˜å…ˆçº§ ğŸ“
6. **ä»£ç ä¼˜åŒ–**
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - ä»£ç é‡æ„

---

## ğŸš¨ æ•…éšœæ’æŸ¥

### å¦‚æœå®¹å™¨æ— æ³•å¯åŠ¨
```powershell
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose -p audit-engine logs

# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose -p audit-engine restart

# å¦‚æœä»ç„¶å¤±è´¥ï¼Œå®Œå…¨é‡å»º
docker-compose -p audit-engine down
docker-compose -p audit-engine up -d --build
```

### å¦‚æœåç«¯APIæ— å“åº”
```powershell
# æ£€æŸ¥åç«¯æ—¥å¿—
docker-compose -p audit-engine logs backend --tail=100

# è¿›å…¥å®¹å™¨æ£€æŸ¥
docker-compose -p audit-engine exec backend sh
# åœ¨å®¹å™¨å†…: netstat -tulpn | grep 3000
```

### å¦‚æœæ•°æ®åº“è¿æ¥å¤±è´¥
```powershell
# æ£€æŸ¥æ•°æ®åº“çŠ¶æ€
docker-compose -p audit-engine exec postgres pg_isready -U postgres

# é‡å¯æ•°æ®åº“
docker-compose -p audit-engine restart postgres
```

---

## âœ… æ£€æŸ¥å®Œæˆå

**ç³»ç»ŸçŠ¶æ€è‰¯å¥½** âœ…
- ç»§ç»­æ—¥å¸¸å¼€å‘å·¥ä½œ
- å®šæœŸè¿è¡Œ `.\health-check.ps1`

**å‘ç°é—®é¢˜** âš ï¸
- è®°å½•é—®é¢˜è¯¦æƒ…
- è¿è¡Œç›¸åº”çš„æ•…éšœæ’æŸ¥æ­¥éª¤
- å¦‚éœ€è¦ï¼Œè”ç³»æŠ€æœ¯æ”¯æŒ

---

## ğŸ“Š æ€§èƒ½åŸºå‡†å‚è€ƒ

| æŒ‡æ ‡ | æ­£å¸¸èŒƒå›´ | å½“å‰å€¼ |
|------|---------|--------|
| åç«¯å“åº”æ—¶é—´ | < 200ms | __ |
| å‰ç«¯åŠ è½½æ—¶é—´ | < 2s | __ |
| CPUä½¿ç”¨ç‡ | < 50% | __ |
| å†…å­˜ä½¿ç”¨ç‡ | < 70% | __ |
| æ•°æ®åº“è¿æ¥æ•° | < 50 | __ |

---

## ğŸ¯ æœ¬å‘¨ç›®æ ‡

- [ ] å®Œæˆæ‰€æœ‰é«˜ä¼˜å…ˆçº§å®‰å…¨é…ç½®
- [ ] å»ºç«‹è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹
- [ ] ç¼–å†™å®Œæ•´çš„éƒ¨ç½²æ–‡æ¡£
- [ ] è¿›è¡Œè´Ÿè½½æµ‹è¯•
- [ ] å‡†å¤‡Betaæµ‹è¯•

**ç¥æ‚¨æ—©å®‰ï¼ç³»ç»Ÿå·²å‡†å¤‡å°±ç»ªï¼** â˜•
