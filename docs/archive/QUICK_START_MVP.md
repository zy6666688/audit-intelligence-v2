# 🚀 审计底稿引擎MVP - 快速启动指南

**版本**: v0.5.0-mvp  
**日期**: 2025-12-01  
**状态**: ✅ MVP可用

---

## 📦 系统概述

**审计底稿引擎**是一个基于节点图的可视化审计工作流平台，支持：
- 🎯 可视化工作流编辑
- 📊 智能数据分析
- 🤖 AI辅助审计
- 📁 文件管理
- 👥 团队协作

---

## ⚡ 5分钟快速开始

### 步骤1: 启动后端服务

```bash
# 进入后端目录
cd packages/backend

# 安装依赖（首次）
npm install

# 启动数据库（如果未启动）
# PostgreSQL需要提前安装并运行

# 运行数据库迁移（首次）
npx prisma migrate dev

# 启动后端服务
npm run dev

# 看到以下输出表示成功：
# ✅ Server running at http://localhost:3000
```

---

### 步骤2: 启动前端服务

```bash
# 在项目根目录
npm install

# 启动H5开发服务
npm run dev:h5

# 看到以下输出表示成功：
# Local:   http://localhost:5173/
```

---

### 步骤3: 访问系统

**打开浏览器访问**: http://localhost:5173

---

## 👤 测试账号

### 管理员账号

```
用户名: admin
密码: admin123
角色: 管理员
权限: 全部功能
```

### 普通用户账号

```
用户名: user
密码: user123
角色: 用户
权限: 基础功能
```

---

## 🎯 核心功能演示

### 1. 创建项目

**路径**: 登录 → 项目列表 → 创建项目

```
步骤:
1. 点击"创建项目"按钮
2. 填写项目信息
   - 项目名称: "2024年度审计项目"
   - 描述: "年度财务审计"
   - 状态: 进行中
3. 点击"保存"
4. 成功创建项目 ✅
```

---

### 2. 创建工作流

**路径**: 项目详情 → 工作流 → 创建工作流

```
步骤:
1. 进入项目详情页
2. 点击"工作流"标签
3. 点击"创建工作流"
4. 进入可视化编辑器 ✅
```

---

### 3. 编辑工作流（核心功能）

**可视化编辑器使用**:

#### 3.1 添加节点

```
步骤:
1. 从左侧节点面板选择节点类型
   
   数据处理类:
   - 📥 数据输入 - 导入审计数据
   - 🔄 数据转换 - 格式转换
   - 🔍 数据筛选 - 条件过滤
   - 📊 数据聚合 - 统计汇总

   审计分析类:
   - ⚠️ 风险评估 - 风险识别
   - ✓ 合规检查 - 合规性验证
   - 🔎 异常检测 - 异常值分析
   - 📈 趋势分析 - 趋势预测

   AI分析类:
   - 🤖 AI分类 - 自动分类
   - 🔮 AI预测 - 智能预测
   - 💭 情感分析 - 文本分析

   输出类:
   - 📄 报告生成 - 自动报告
   - 📤 数据导出 - 结果导出
   - 🔔 通知 - 消息提醒

2. 点击节点添加到画布
3. 节点出现在画布上 ✅
```

#### 3.2 拖拽节点

```
步骤:
1. 触摸/点击节点
2. 拖动到目标位置
3. 释放完成移动
4. 节点自动对齐网格 ✅
```

#### 3.3 配置节点

```
步骤:
1. 点击选中节点
2. 右侧显示属性面板
3. 编辑节点信息:
   - 节点名称
   - 节点描述
   - 配置参数
4. 修改自动保存 ✅
```

#### 3.4 删除节点

```
步骤:
1. 选中节点
2. 点击右上角"✕"按钮
3. 确认删除
4. 节点移除 ✅
```

#### 3.5 保存工作流

```
步骤:
1. 点击顶部"💾 保存"按钮
2. 工作流自动保存
3. 显示"保存成功" ✅
4. 状态栏显示保存时间
```

---

### 4. 上传文件

**路径**: 项目详情 → 文件 → 上传文件

#### 4.1 使用文件上传组件

```
步骤:
1. 进入项目或工作流页面
2. 找到文件上传区域
3. 点击上传区域或"选择文件"
4. 选择要上传的文件
5. 自动上传到服务器
6. 显示上传进度
7. 完成后显示在文件列表 ✅
```

#### 4.2 支持的文件类型

```
🖼️ 图片文件
   - jpg, jpeg, png, gif, bmp, webp

📕 PDF文档
   - pdf

📘 Word文档
   - doc, docx

📗 Excel表格
   - xls, xlsx

📦 压缩包
   - zip, rar, 7z

📄 其他文件
   - 所有类型
```

#### 4.3 文件管理

```
下载文件:
1. 点击文件列表中的"下载"按钮
2. 文件自动下载 ✅

删除文件:
1. 点击"删除"按钮
2. 确认删除
3. 文件移除 ✅
```

---

## 📱 页面导航

### 主要页面

```
/pages/login/index          - 登录页面
/pages/index/index          - 首页
/pages/project/list         - 项目列表
/pages/project/detail-new   - 项目详情
/pages/workflow/list        - 工作流列表
/pages/workflow/detail      - 工作流编辑器 ⭐
```

---

## 🎨 工作流编辑器界面说明

### 顶部工具栏

```
左侧:
  ◀ 返回      - 返回上一页
  输入框       - 工作流名称编辑

右侧:
  ➕ 节点      - 显示/隐藏节点面板
  💾 保存      - 保存工作流
  ▶ 执行       - 执行工作流
```

### 三栏布局

```
左侧: 节点面板
  - 节点分类列表
  - 点击添加节点

中间: 画布区域
  - 网格背景
  - 节点显示和拖拽
  - 连线显示
  - 滚动查看大画布

右侧: 属性面板
  - 节点详细信息
  - 配置参数编辑
  - 实时保存
```

### 底部状态栏

```
左侧: 统计信息
  - 节点数量
  - 连线数量

右侧: 保存状态
  - 上次保存时间
```

---

## 🔧 常见问题

### Q1: 后端无法启动？

**A**: 检查以下几点：

```bash
# 1. 确认PostgreSQL运行中
psql --version

# 2. 检查数据库连接配置
cat packages/backend/.env
# DATABASE_URL应该正确

# 3. 运行数据库迁移
cd packages/backend
npx prisma migrate dev

# 4. 重新启动
npm run dev
```

---

### Q2: 前端无法访问后端？

**A**: 检查CORS配置：

```javascript
// packages/backend/src/index.ts
app.use(cors()); // 确保启用CORS
```

---

### Q3: 工作流编辑器节点无法拖动？

**A**: 这是正常的，因为：

1. 触摸事件在不同平台表现不同
2. 需要在实际移动设备测试
3. Web端可以使用鼠标拖拽

**临时解决方案**:
- 使用属性面板手动调整位置
- 或在实际移动设备上测试

---

### Q4: 文件上传失败？

**A**: 检查以下几点：

```bash
# 1. 确认uploads目录存在
mkdir -p packages/backend/uploads

# 2. 检查文件大小限制
# 默认50MB，可在配置中调整

# 3. 检查文件类型
# 默认支持所有类型

# 4. 查看后端日志
# 查看具体错误信息
```

---

### Q5: 页面显示空白？

**A**: 打开浏览器开发者工具：

```
F12 → Console
查看是否有JavaScript错误

常见原因:
1. API请求失败 - 检查后端是否运行
2. Token过期 - 重新登录
3. 路由错误 - 检查URL是否正确
```

---

## 🎯 推荐工作流示例

### 示例1: 基础数据分析流程

```
1. 📥 数据输入 
   ↓
2. 🔍 数据筛选
   ↓
3. 📊 数据聚合
   ↓
4. 📄 报告生成
   ↓
5. 📤 数据导出
```

**用途**: 基础审计数据分析

---

### 示例2: AI辅助审计流程

```
1. 📥 数据输入
   ↓
2. 🔄 数据转换
   ↓
3. 🤖 AI分类
   ↓
4. ⚠️ 风险评估
   ↓
5. 🔔 通知
```

**用途**: 智能风险识别

---

### 示例3: 合规检查流程

```
1. 📥 数据输入
   ↓
2. ✓ 合规检查
   ↓
3. 🔎 异常检测
   ↓
4. 📄 报告生成
```

**用途**: 合规性审计

---

## 📚 更多资源

### 文档

```
📄 PRODUCTION_READINESS_ASSESSMENT.md  - 生产就绪度评估
📄 MVP_FRONTEND_COMPLETE.md            - MVP完成报告
📄 DAY4_PROGRESS.md                    - Day 4进度报告
📄 BACKEND_100_COMPLETE.md             - 后端完成报告
```

### API文档

```
访问: http://localhost:3000/
查看完整的API端点列表
```

---

## 🎉 开始使用

**现在就开始创建您的第一个审计工作流吧！**

```bash
# 1. 启动服务
npm run dev:h5

# 2. 打开浏览器
http://localhost:5173

# 3. 登录系统
用户名: admin
密码: admin123

# 4. 创建项目

# 5. 创建工作流

# 6. 开始编辑！
```

---

**技术支持**: 查看文档或联系开发团队  
**当前版本**: v0.5.0-mvp  
**更新日期**: 2025-12-01

🎊 **祝您使用愉快！**
